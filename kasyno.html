<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kasyno Online</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #1e1e1e;
      color: white;
      padding: 20px;
    }

    #casino {
      margin-top: 20px;
    }

    .slot {
      display: inline-block;
      font-size: 40px;
      width: 50px;
      height: 50px;
      background-color: #333;
      margin: 5px;
    }

    .spinning {
      animation: spin 1s infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .big-win { color: yellow; font-size: 2em; }
    .mega-win { color: orange; font-size: 2.5em; }
    .ultra-win { color: red; font-size: 3em; }

    #fireworks {
      position: absolute;
      top: 0;
      left: 0;
    }

    #clown-face {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background-color: #f00;
      margin-top: 20px;
      background-size: cover;
    }

    .laugh {
      background-image: url('laugh.png');
    }

    .surprised {
      background-image: url('surprised.png');
    }
  </style>
</head>
<body>
  <h1>Witaj w Kasynie!</h1>

  <!-- Wyb√≥r kasyna -->
  <select id="casino" onchange="updateCasinoTheme()">
    <option value="joker">Joker</option>
    <option value="lucky">Lucky</option>
    <option value="gold">Gold</option>
    <option value="retro">Retro</option>
  </select>

  <!-- Obrazek klauna -->
  <div id="clown-face"></div>

  <!-- Sloty -->
  <div id="slots">
    <div class="slot">üçí</div>
    <div class="slot">üîî</div>
    <div class="slot">üçã</div>
    <div class="slot">‚≠ê</div>
    <div class="slot">üíé</div>
  </div>

  <div>
    <input type="number" id="bet" min="1" value="10">
    <button onclick="playSlot()">Spin</button>
  </div>

  <div>
    <p>Stan konta: <span id="balance">100</span> üí∞</p>
    <p id="result"></p>
  </div>

  <canvas id="fireworks"></canvas>

  <!-- Przycisk do przekierowania na stronƒô ko≈Ça fortuny -->
  <div style="margin-top: 20px;">
    <button onclick="window.location.href='ko≈Çofortuny.html'">Przejd≈∫ do Ko≈Ça Fortuny</button>
  </div>

  <video id="megaWinVideo" style="display:none; max-width:100%; border-radius:10px" autoplay muted></video>

  <script>
    const symbols = ["üçí", "üîî", "üçã", "‚≠ê", "üíé"];
    let balance = 100;

    // Funkcja do zmiany tematu kasyna
    function updateCasinoTheme() {
      const casino = document.getElementById('casino').value;
      const clown = document.getElementById('clown-face');
      let img = '';
      switch (casino) {
        case 'joker': img = 'joker.png'; break;
        case 'lucky': img = 'lucky.png'; break;
        case 'gold': img = 'gold.png'; break;
        case 'retro': img = 'retro.png'; break;
      }
      clown.style.backgroundImage = `url('${img}')`;
    }

    // Funkcja gry w sloty
    function playSlot() {
      const bet = parseInt(document.getElementById('bet').value);
      const spinButton = document.querySelector('button');
      if (bet > balance || bet <= 0) {
        alert("Nie masz wystarczajƒÖco ≈ºeton√≥w lub nieprawid≈Çowa stawka.");
        return;
      }

      spinButton.disabled = true;

      const slotElements = document.querySelectorAll('#slots .slot');
      const result = [];

      // Animacja krƒôcenia slotami
      slotElements.forEach(el => {
        el.classList.add('spinning');
      });

      // Op√≥≈∫nienie na czas animacji
      setTimeout(() => {
        slotElements.forEach(el => el.classList.remove('spinning'));
        for (let i = 0; i < 5; i++) {
          const symbol = symbols[Math.floor(Math.random() * symbols.length)];
          slotElements[i].textContent = symbol;
          result.push(symbol);
        }

        const counts = {};
        result.forEach(sym => counts[sym] = (counts[sym] || 0) + 1);

        let output = 'Spr√≥buj jeszcze raz...';
        let reward = 0;
        let fireworks = false;
        let winClass = "";

        for (let key in counts) {
          if (counts[key] === 3) {
            reward = bet * 2;
            output = 'üéâ BIG WIN! üéâ';
            winClass = "big-win";
          } else if (counts[key] === 4) {
            reward = bet * 5;
            output = 'üí• MEGA WIN!!! üí•';
            winClass = "mega-win";
            fireworks = true;
          } else if (counts[key] === 5) {
            reward = bet * 10;
            output = 'üî•üî• ULTRA WIN!!!! üî•üî•';
            winClass = "ultra-win";
            fireworks = true;
          }
        }

        // Aktualizacja balansu i wynik√≥w
        if (reward === 0) {
          balance -= bet;
        } else {
          balance += reward;
          showFullScreenWin(output, winClass);
        }

        document.getElementById('balance').textContent = balance;
        document.getElementById('result').textContent = output;

        updateClownFace(balance);
        if (fireworks) startFireworks();

        // Zako≈Ñczenie animacji
        setTimeout(() => {
          spinButton.disabled = false;
        }, 2000);
      }, 1000);
    }

    function showFullScreenWin(text, winClass) {
      const div = document.createElement("div");
      div.className = winClass;
      div.textContent = text;
      document.body.appendChild(div);
      setTimeout(() => div.remove(), 3000);
    }

    function updateClownFace(balance) {
      const clown = document.getElementById('clown-face');
      if (balance < 30) {
        clown.classList.add('laugh');
        clown.classList.remove('surprised');
      } else if (balance > 150) {
        clown.classList.add('surprised');
        clown.classList.remove('laugh');
      } else {
        clown.classList.remove('laugh', 'surprised');
      }
    }

    // Animacja fajerwerk√≥w
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    function startFireworks() {
      let particles = [];
      for (let i = 0; i < 150; i++) {
        particles.push({
          x: canvas.width / 2,
          y: canvas.height / 2,
          dx: Math.random() * 12 - 6,
          dy: Math.random() * 12 - 6,
          life: 30
        });
      }

      let interval = setInterval(() => {
        ctx.fillStyle = "rgba(0, 0, 0, 0.2)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          ctx.fillStyle = `hsl(${Math.random() * 360}, 100%, 70%)`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
          ctx.fill();
          p.x += p.dx;
          p.y += p.dy;
          p.life--;
        });
        particles = particles.filter(p => p.life > 0);
        if (particles.length === 0) {
          clearInterval(interval);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }, 20);
    }
  </script>
</body>
</html>
